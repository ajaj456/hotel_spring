<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.Notice">

	<!-- 게시판리스트 -->
	<select id="list" resultType="com.hotel.board.model.Notice">
		select
		no,title,content,hit,to_char(wdate,'yyyy-mm-dd')wdate,to_char(startdate,'yyyy-mm-dd')startDate,
		to_char(enddate,'yyyy-mm-dd')endDate,fileName from notice
		<choose>
			<when test="period == old">

				where endDate<![CDATA[ < ]]>
				sysdate-1
			</when>
			<when test="period == res">
				where startDate<![CDATA[ < ]]>
				sysdate
			</when>
			<when test="period == cur">
				where startDate<![CDATA[ <= ]]>
				sysdate and endDate >= sysdate-1
			</when>
		</choose>

	</select>


	<select id="findActiveBlogLike" resultType="Blog">
		SELECT * FROM BLOG WHERE state = ‘ACTIVE’
		<choose>
			<when test="title != null">
				AND title like #{title}
			</when>
			<when test="author != null and author.name != null">
				AND author_name like #{author.name}
			</when>
			<otherwise>
				AND featured = 1
			</otherwise>
		</choose>
	</select>
</mapper>