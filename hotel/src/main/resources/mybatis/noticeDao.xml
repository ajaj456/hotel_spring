<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.Notice">

	<!-- 게시판리스트 -->
	<select id="list" resultType="com.hotel.notice.model.Notice">
		select
		no,title,content,hit,to_char(wdate,'yyyy-mm-dd')wdate,startDate,
		endDate,fileName from notice
		<choose>
			<when test="period == 'old'">

				where endDate<![CDATA[ < ]]>
				sysdate-1
			</when>
			<when test="period == 'res'">
				where startDate<![CDATA[ < ]]>
				sysdate
			</when>
			<when test="period == 'cur'">
				where startDate<![CDATA[ <= ]]>
				sysdate and endDate >= sysdate-1
			</when>
		</choose>

	</select>


	<!-- 게시판 글갯수 -->
	<select id="totalCount" resultType="Integer">
		select
		count(*)
		from notice
	</select>
</mapper>